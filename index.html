<script>
  const canvas = document.getElementById('paper');
  const ctx = canvas.getContext('2d');

  // 定義太陽位置和半徑
  const sunPos = { 
    x: canvas.width / 2, 
    y: canvas.height * 0.1, 
    r: 120 
  };

  // 圖片載入
  const turtleImg = new Image();
  turtleImg.src = 'turtle.png';
  const sunImg = new Image();
  sunImg.src = 'sun.png';
  const fireImg = new Image();
  fireImg.src = 'fire.png';

  // 底色
  function drawPaperBG() {
    ctx.fillStyle = '#FFFFF0';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  }

  // 畫太陽（置中偏上）
  function drawSun() {
    if (sunImg.complete) {
      ctx.drawImage(
        sunImg,
        sunPos.x - sunPos.r,
        sunPos.y - sunPos.r,
        sunPos.r * 2,
        sunPos.r * 2
      );
    }
  }

  // 畫烏龜，facingRight 決定水平翻轉
  function drawTurtle(x, y, size, facingRight) {
    ctx.save();
    ctx.translate(x, y);
    if (facingRight) ctx.scale(-1, 1);
    if (turtleImg.complete) {
      ctx.drawImage(turtleImg, -size/2, -size/2, size, size);
    }
    ctx.restore();
  }

  class Turtle {
    constructor(x, y, size, facingRight) {
      this.x = x;
      this.y = y;
      this.size = size;
      this.facingRight = facingRight;
    }
    draw() {
      drawTurtle(this.x, this.y, this.size, this.facingRight);
    }
  }

  // 畫日期、時間、地點文字
  function drawFooter() {
    const d = document.getElementById('dateInput').value || 'YYYY-MM-DD';
    const t = document.getElementById('timeInput').value || 'HH:MM';
    const l = document.getElementById('locInput').value || '地點';
    ctx.fillStyle = '#000';
    ctx.font = '28px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(`${d}  ${t}`, canvas.width/2, canvas.height - 60);
    ctx.fillText(l, canvas.width/2, canvas.height - 20);
  }

  // 整合渲染
  const turtles = [];
  function renderScene() {
    drawPaperBG();
    drawSun();
    turtles.forEach(t => t.draw());
    drawFooter();
  }

  // 事件綁定：畫烏龜
  document.getElementById('drawBtn').addEventListener('click', () => {
    const groundY = canvas.height - 100;
    const x = 50 + Math.random() * (canvas.width - 100);
    const y = groundY + Math.random() * 50;
    const size = 40 + Math.random() * 60;
    const facingRight = x < canvas.width / 2;
    turtles.push(new Turtle(x, y, size, facingRight));
    renderScene();
  });

  // ……（其餘 burnBtn、resetBtn 綁定保持不變）

  // 初始渲染
  renderScene();
</script>
